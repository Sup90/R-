setwd("c:/Users/rhkdt/Desktop/R-/bussiness_prac/R")
ab_imp<-read.csv("section5-ab_test_imp.csv",header = T,sep = ",",stringsAsFactors = F)
ab_goal<-read.csv("section5-ab_test_goal.csv",header = T,stringsAsFactors = F)
ab_imp_goal<-merge(x = ab_imp,y = ab_goal,by = "transaction_id",suffixes = c("",".g"),all.x = T)
ab_imp_goal$flag<-ifelse(is.na(ab_imp_goal$user_id.g),0,1)
head()
head(ab_imp_goal)
library(plyr)
install.packages("plyr")
head(ab_imp_goal[is.na(ab_imp_goal$user_id.g)=F,])
head(ab_imp_goal[is.na(ab_imp_goal$user_id.g)==F,])
library(plyr)
ddply(ab_imp_goal,.variables = .(test_case),summarize,cvr=sum(flag)/length(user_id))
ddply(ab_imp_goal,.variables = .(test_case),summarize,cvr=length(user_id))
ddply(ab_imp_goal,.variables = .(test_case),summarize,cvr=sum(flag))
#ddply로 데이터 계산 테이블만들기
#변수는 테스트 케이스
#계산 방법은 서머리
#계산 값은 테스트 케이스에 따른 유저 전체
chisq.test(ab_imp_goal$test_case,ab_imp_goal$flag)
#카이검정 실행
#p-value < 2.2e-16
#p-value가 0.05보다 작으면 일반적으로 통계적 유의미한 차이가 있다고 간주
#결과적으로 a,b를 나눈 테스트의 의미가 있었다.
ab_imp_goal_summary<-
ddply(ab_imp_goal,.(log_date,test_case),summarize,
imp=length(user_id),
cv-sum(flag),
cvr=sum(flag)/length(user_id))
ab_imp_goal_summary<-
ddply(ab_imp_goal,.(log_date,test_case),summarize,
imp=length(user_id),
cv-sum(flag),
cvr=sum(flag)/length(user_id))
head(ab_imp_goal)
head(ab_imp_goal_summary)
#카이검정 실행
#p-value < 2.2e-16
#p-value가 0.05보다 작으면 일반적으로 통계적 유의미한 차이가 있다고 간주
#결과적으로 a,b를 나눈 테스트의 의미가 있었다.
ab_imp_goal_summary<-
ddply(ab_imp_goal,.(log_date,test_case),summarize,
imp=length(user_id),
cv=sum(flag),
cvr=sum(flag)/length(user_id))
head(ab_imp_goal_summary)
ab_imp_goal_summary2<-ddply(ab_imp_goal_summary,.(test_case),transform,cvr.avg=sum(cv)/sum(imp))
#카이검정 실행
#p-value < 2.2e-16
#p-value가 0.05보다 작으면 일반적으로 통계적 유의미한 차이가 있다고 간주
#결과적으로 a,b를 나눈 테스트의 의미가 있었다.
ab_imp_goal_summary<-
ddply(ab_imp_goal,.(log_date,test_case),summarize,
imp=length(user_id),
cv=sum(flag),
cvr=sum(flag)/length(user_id)
cvr.avg=sum(cv)/sum(imp))
#카이검정 실행
#p-value < 2.2e-16
#p-value가 0.05보다 작으면 일반적으로 통계적 유의미한 차이가 있다고 간주
#결과적으로 a,b를 나눈 테스트의 의미가 있었다.
ab_imp_goal_summary<-
ddply(ab_imp_goal,.(log_date,test_case),summarize,
imp=length(user_id),
cv=sum(flag),
cvr=sum(flag)/length(user_id),
cvr.avg=sum(cv)/sum(imp))
#ddply를 통해 데이터셋 새로 조정
#log_date와 test_case를 변수로 사용하여
#imp,cv,crv를 새로 만들음
head(ab_imp_goal_summary)
ab_imp_goal_summary<-ddply(ab_imp_goal_summary,.(test_case),transform,cvr.avg=sum(cv)/sum(imp))
#ddply를 통해 데이터셋 새로 조정
#log_date와 test_case를 변수로 사용하여
#imp,cv,crv를 새로 만들음
#여기는 행별로 새로 만들음
head(ab_imp_goal_summary)
#transform을 통해 원래 데이터에 새로운 집계결과 추가 가능
#여기는 전체 데이터 를 통해 새로 만들음
install.packages("ggplot2")
library(ggplot2)
library(scales)
library(ggplot2)
library(scales)
ab_imp_goal_summary$log_date<-as.Date(ab_imp_goal_summary$log_date)
#날짜 데이터로 변환
limits<-c(0,max(ab_imp_goal_summary$cvr))
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avr,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
lty=test_case,
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
,shape=test_case
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=2)+
geom_point(size=4)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=2)+
geom_point(size=5)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=2)+
geom_point(size=10)+
geom_line(aes(y=cvr.avg,col=test_case))+
scale_y_continuous(label=percent,limits = limits)
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=2)+
geom_point(size=10)+
scale_y_continuous(label=percent,limits = limits)
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_point(size=4)+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(label=percent,limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(limits = limits)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(label=percent)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(label=percent,limits = limits)
,limits = limits
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(label=percent)
#축을 위해 한계선 설정
ggplot(ab_imp_goal_summary,aes(log_date,cvr,col=test_case,lty=test_case,shape=test_case))+geom_line(lwd=1)+
geom_line(aes(y=cvr.avg,col=test_case))+
geom_point(size=4)+
scale_y_continuous(label=percent,limits = limits)
